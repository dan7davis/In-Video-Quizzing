<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Quiz-A</title>
	    <!-- Survey.js -->
    <script src="https://unpkg.com/jquery"></script>
    <script src="js/survey.jquery.js"></script>
    <link rel="stylesheet" href="css/survey.css"/>
    <link rel="stylesheet" href="css/index-Q.css"/>

</head>
<p id="user"></p> 
<body>


	

	<div id="surveyContainer"></div>

<div id="expand-box">

	<form action="Video-N.html">
	<button class="btn btn-primary" id="back" style="float: left">Back to Video</button>
	</form>

	<form action="Video-Q.html">
	<button class="btn btn-primary disabled">Next Video Lecture</button>
	</form>

</div>

</body>

<script>

var name = localStorage.getItem("exp_id")
$("#user").text("You are user: "+ name)
var videoID = document.title;

var settings;

function sendData() {
  settings = {
  "async": true,
  "crossDomain": true,
  "url": "https://crowd-events.herokuapp.com/api/events",
  "method": "POST",
  "data": {
    "name": name,
    "action": actionBody,
    "video": videoID
  }
}


  $.ajax(settings).done(function (response) {
    console.log(response);
  });
}



var surveyJSON = {pages:[{name:"page1",elements:[{type:"radiogroup",name:"question1",title:"Why do you think that new B2B products (products for other businesses) succeed more often than new B2C products (products for the consumer market)?",isRequired:true,choices:[{value:"item1",text:"B2B products are often less complex than B2C products."},{value:"item2",text:"B2C companies cannot receive feedback from consumers in the potential target market ."},{value:"item3",text:"B2B products are often developed in close cooperation with their intended users."},{value:"item4",text:"Triability is less likely to achieve for B2B products."}]},{type:"checkbox",name:"question2",title:"Which of the following product characteristics are part of Rogers defenition of a new products' advantage? Pick two:",isRequired:true,choices:[{value:"item1",text:"Low complexity"},{value:"item2",text:"Low perishability"},{value:"item3",text:"High compatibility"},{value:"item4",text:"High emotionability"},{value:"item5",text:"High plausibility"}]},{type:"radiogroup",name:"question3",title:"Why is the importance of new products apprarently higher in communication and electronics firms than for Fast Moving Consumer Goods (FMCG) firms?",isRequired:true,choices:[{value:"item1",text:"The time to market of new FMCG products is longer."},{value:"item2",text:"Technology and consumer preferences change very rapidly for communication and electronics firms."},{value:"item3",text:"Retailers of FMCG are less interested in innovations."},{value:"item4",text:"There are more communication and electronics firms in the Netherlands and the UK than in the USA."}]},{type:"radiogroup",name:"question4",title:"In the paper building a market-oriented culture is discussed. What is not true about building a market-oriented culture?",isRequired:true,choices:[{value:"item1",text:"A market-oriented culture has an influence on product succes."},{value:"item2",text:"In a market-oriented culture, customers are stimulated to come up with new product suggestions."},{value:"item3",text:"In a market-oriented culture, customer's wishes are actively scanned."},{value:"item4",text:"Market orientation is the sole responsibility of the marketing department."}]}]}]}

function sendDataToServer(survey) {
    //send Ajax request to your web server.
    actionBody = JSON.stringify(survey.data);
    sendData();
    $("button").attr('class', 'btn btn-primary');
    $("button#back").css('display', 'none');
}

var survey = new Survey.Model(surveyJSON);
$("#surveyContainer").Survey({
    model: survey,
    onComplete: sendDataToServer
});


$( document ).ready(function() {
    actionBody = String("Page loaded");
    sendData();
    var tabCount = Number(localStorage.getItem("tabCount")) - 1;
    if(tabCount > 4){
      document.removeChild(document.documentElement);	  
    }
});



document.addEventListener("visibilitychange", function() {
  console.log( document.visibilityState );
  if(document.visibilityState == "hidden"){
    tabCount += 1;
    localStorage.setItem("tabCount", tabCount);
    actionBody = String("hidden " + tabCount);
    sendData();
    if(tabCount > 4){
      document.removeChild(document.documentElement);	  
    }
    alertify.confirm("Warning: You left the tab " + tabCount + "/4 times.", function () {
          // user clicked "ok"
      }, function() {
          // user clicked "cancel"
    }).set('basic', true).closeOthers();
  } else {    
    actionBody = String("visible");
    sendData();
  }
});


</script>

<!-- JavaScript -->
<script src="./js/AlertifyJS-master/build/alertify.min.js"></script>

<!-- CSS -->
<link rel="stylesheet" href="./js/AlertifyJS-master/build/css/alertify.min.css" />
<!-- include a theme -->
<link rel="stylesheet" href="./js/AlertifyJS-master/build/css/themes/semantic.css" />

</html>
